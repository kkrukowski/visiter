<!DOCTYPE html>
<html lang="pl">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Moje wizyty | Visiter</title>
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png" />
    <link rel="manifest" href="/site.webmanifest" />
    <link rel="stylesheet" href="/styles/styles.css" />
    <link rel="stylesheet" href="/styles/clientVisits.css" />
    <link rel="stylesheet" href="/styles/normalize.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css"
    />
    <script src="../js/moment.min.js"></script>
  </head>
  <body>
    <!-- Nav -->
    <nav class="nav">
      <div class="nav__wrapper">
        <a href="/" class="nav__img--link"
          ><img
            src="/assets/imgs/visiter-inline.png"
            alt="Visiter"
            title="Visiter"
            class="nav--img"
        /></a>
        <section class="menu__list">
          <li class="menu__list--item">
            <a href="/" class="item--link">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                fill="none"
                viewBox="0 0 24 24"
                stroke-width="1.5"
                stroke="currentColor"
                class="item--icon"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  d="M2.25 12l8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"
                />
              </svg>

              <p class="list__item--name">Strona Główna</p>
            </a>
          </li>
          <li class="menu__list--item">
            <a href="/profile/<%= user._id %>" class="item--link">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                fill="none"
                viewBox="0 0 24 24"
                stroke-width="1.5"
                stroke="currentColor"
                class="item--icon"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  d="M15.75 6a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0zM4.501 20.118a7.5 7.5 0 0114.998 0A17.933 17.933 0 0112 21.75c-2.676 0-5.216-.584-7.499-1.632z"
                />
              </svg>

              <p class="list__item--name">Mój profil</p>
            </a>
          </li>
          <li class="menu__list--item">
            <a href="/business/search" class="item--link"
              ><svg
                xmlns="http://www.w3.org/2000/svg"
                fill="none"
                viewBox="0 0 24 24"
                stroke-width="1.5"
                stroke="currentColor"
                class="item--icon"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  d="M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"
                />
              </svg>
              <p class="list__item--name">Szukaj</p>
            </a>
          </li>
          <li class="menu__list--item">
            <a href="/visits" class="item--link"
              ><svg
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 24 24"
                fill="currentColor"
                class="item--icon"
              >
                <path
                  d="M19.906 9c.382 0 .749.057 1.094.162V9a3 3 0 00-3-3h-3.879a.75.75 0 01-.53-.22L11.47 3.66A2.25 2.25 0 009.879 3H6a3 3 0 00-3 3v3.162A3.756 3.756 0 014.094 9h15.812zM4.094 10.5a2.25 2.25 0 00-2.227 2.568l.857 6A2.25 2.25 0 004.951 21H19.05a2.25 2.25 0 002.227-1.932l.857-6a2.25 2.25 0 00-2.227-2.568H4.094z"
                />
              </svg>

              <p class="list__item--name">Moje wizyty</p>
            </a>
          </li>
          <li class="menu__list--item">
            <a href="/chat" class="item--link"
              ><svg
                xmlns="http://www.w3.org/2000/svg"
                fill="none"
                viewBox="0 0 24 24"
                stroke-width="1.5"
                stroke="currentColor"
                class="item--icon"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  d="M8.625 9.75a.375.375 0 11-.75 0 .375.375 0 01.75 0zm0 0H8.25m4.125 0a.375.375 0 11-.75 0 .375.375 0 01.75 0zm0 0H12m4.125 0a.375.375 0 11-.75 0 .375.375 0 01.75 0zm0 0h-.375m-13.5 3.01c0 1.6 1.123 2.994 2.707 3.227 1.087.16 2.185.283 3.293.369V21l4.184-4.183a1.14 1.14 0 01.778-.332 48.294 48.294 0 005.83-.498c1.585-.233 2.708-1.626 2.708-3.228V6.741c0-1.602-1.123-2.995-2.707-3.228A48.394 48.394 0 0012 3c-2.392 0-4.744.175-7.043.513C3.373 3.746 2.25 5.14 2.25 6.741v6.018z"
                />
              </svg>
              <p class="list__item--name">Wiadomości</p>
            </a>
          </li>
        </section>
      </div>
    </nav>
    <!-- Main block -->
    <main class="main">
      <h1>Moje wizyty</h1>
      <section class="visits--scrollable">
        <div class="visits--list">
          <% if (visits) { %> <% visits.forEach(function (visit) { %> <% const
          months = ['Styczeń', 'Luty', 'Marzec', 'Kwiecień', 'Maj', 'Czerwiec',
          'Lipiec', 'Sierpień', 'Wrzesień', 'Październik', 'Listopad',
          'Grudzień']; %> <% let status = '' %><% switch (visit.status) { case
          'waiting': status = 'Oczekująca'; break; default: status = 'nieznany';
          break; } %>
          <div class="visit--item">
            <div class="visit--info">
              <p class="info--status"><%= status %></p>
              <p class="info__service--name"><%= visit.serviceId.name %></p>
              <div class="info__employee--info">
                <img class="employee--avatar" src="/assets/imgs/profile.webp" />
                <p class="employee--name">
                  <span><%= visit.workerId.name %></span> z
                  <span><%= visit.businessId.name %></span>
                </p>
              </div>
            </div>
            <div class="visit--date">
              <p class="date--month">
                <%= months[new Date(visit.visitDate).getUTCMonth()] %>
              </p>
              <p class="date--day">
                <%= new Date(visit.visitDate).getDate() %>
              </p>
              <p class="date--hour">
                <span><%= new Date(visit.visitDate).getUTCHours() %></span
                >:<span
                  ><%= new Date(visit.visitDate).getUTCMinutes() < 10 ? '0' +
                  new Date(visit.visitDate).getUTCMinutes() : new
                  Date(visit.visitDate).getUTCMinutes() %>
                </span>
              </p>
            </div>
          </div>
          <% }) %><% } %>
        </div>
      </section>
    </main>
  </body>
  <script src="../js/script.js"></script>
</html>
